<canvas id="canvas" style="border: 1px solid black;position:absolute;left:0px;top:0px;"></canvas>
<input id="color" type="color" style="position:absolute;top: 75%;">
<button onclick="updatePFP()" style="position:absolute;top: 80%;">Submit and update Profile Picture</button>

<script>
const c = document.getElementById("canvas")
const ctx = c.getContext('2d')

const boardSize = [5,5]
c.width = c.height
const canvasSize = [c.width,c.height]
const mp = [
	canvasSize[0]/boardSize[0],
	canvasSize[1]/boardSize[1],
]

const currentDrawing = {}

function updatePFP(){
	fetch('https://Gameshub-API.academyofcode1.repl.co/updatepfp?token='+getCookie("accToken")+"&url="+c.toDataURL(),{})
	.then(response => response.text())
	.then(data => {
		console.log(JSON.parse(data))
	})
}

function render(){
	for(var i=0;i<boardSize[0];i++){
  	for(var j=0;j<boardSize[1];j++){
    	var cb = currentDrawing[i+","+j]
      if(cb!=undefined){
      	ctx.fillStyle = cb
      	ctx.fillRect(i*mp[0],j*mp[1],mp[0],mp[1])
      }
    }
  }
}

setInterval(render,1)

document.onmousedown = (e)=>{
	var pos = [e.clientX,e.clientY]
  var posTransform = [Math.floor(pos[0]/mp[0]), Math.floor(pos[1]/mp[1])]
  currentDrawing[posTransform[0]+","+posTransform[1]] = document.getElementById("color").value
}
</script>