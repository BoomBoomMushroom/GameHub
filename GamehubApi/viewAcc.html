<img id="pfp" src="" style="border:1px solid black;background-color:white" width=150 height=150>
<p id="accountUsername">{USERNAME}</p>
<em><p id="accountUUID">{UUID}</p></em>

<br>

<div id="accountFriends">
  <p id="friendsHeader" style="display:none;">Friends:</p>
</div>

<div id="accountAdvancements">
  <p id="advancementsHeader" style="display:none;">Advancements:</p>
</div>

<style>
.darkmode_text{
  color: white
}
.darkmode_body{
  background: "#2C2F33"
}

#accountUsername{
  font-size: 20px
}
#accountUUID{
  font-size: 15px
}
</style>

<script>
      let HOST = 'wss://multi-socket-ms.herokuapp.com/'
      let ws = new WebSocket(HOST);

      function heartbeat(){
        clearTimeout(this.pingTimeout);

        this.pingTimeout = setTimeout(() => {
              this.terminate()
            }, 30000);
      }

      ws.onmessage = function incoming(data) {
        var msg = data.data.text();
        msg.then(m=>{
          if(recentActions.length>0){
          	if (recentActions[0]=="Signin"){
            	if (m!=="INVALID_ACCOUNT_TOKEN"){
                if(document.getElementById("rememberMe").checked===true){
                  setCookie("accToken",m,365*10)
                  recentActions.shift()
                } else{
                  setCookie("accToken",m,1)
                  recentActions.shift()
                }
                console.log("Token Got: "+m)
              } else{
              	console.log(m)
              	alert("Invailid Username or Password!")
              }
            }
            else if(recentActions[0]=="getAcc"){
            	// console.log("Signup message returned : "+m)
              console.log(m)
              loadData(m)
              recentActions.shift()
            }
          }
          //console.log(m)
        })
      }

      ws.on('open', heartbeat);
      ws.on('ping', heartbeat);
      ws.on('close', function close() {
        clearTimeout(this.pingTimeout);
      })
  </script>

<script src="viewAcc.js"></script>
