<link rel="icon" href="GamesHubLogo.png">

<h1>Welcome to the browser game place!</h1>

<a style='position:absolute;;bottom:10px;right:10px;' href="" id="currentAcc"></a>

<!-- tr1: https://gameshub.netlify.app/gamehubapi/signup  -->
<a id='tr1' href="https://gameshub.dev/gamehubapi/signup"><button id="signupButton" style="top:10px;right:10px;width:70px;">Signup</button></a>
<a id='tr2' href="https://gameshub.dev/gamehubapi/signin"><button id="loginButton" style="top:35px;right:10px;width:70px;">Log in</button></a>
<a id='tr3' href="https://gameshub.dev/gamehubapi/accsearch"><button id="accSearchButton" style="top:60px;right:10px;width:70px;">Search Accounts</button></a>
<a id='tr4' href="https://gameshub.dev/gamehubapi/report"><button id="reportButton" style="top:100px;right:10px;width:70px;">Contact Me</button></a>

<style>
	body{
		background-image: url("https://raw.githubusercontent.com/BoomBoomMushroom/GameHub/main/GamehubApi/images/GH_Background.png");
		background-repeat: no-repeat;
  		background-size: cover;
	}
	#tr1{
		position: absolute;
		top: 10px;
		right: 10px;
	}
	#tr2{
		position: absolute;
		top: 35px;
		right: 10px;
	}
	#tr3{
		position: absolute;
		top: 60px;
		right: 10px;
	}
	#tr4{
		position: absolute;
		top: 100px;
		right: 10px;
	}
</style>

<!-- Line break every 10 games -->

<p>Single Player Games</p>
<a href="https://gameshub.dev/snake"><button>Snake</button></a>
<a href="https://pet-the-dog.netlify.app/"><button>Pet the Dog!</button></a>
<a href="https://gameshub.dev/solarsystemsimulator"><button>Solar System Simulator</button></a>
<a href="https://custom-programming-language-creator.netlify.app"><button>Custom Programming Language Crearor</button></a>
<a href="https://gameshub.dev/market"><button>Market Simulator</button></a>
<a href="https://gameshub.dev/monpoke"><button>Monpoke</button></a>
<a href="http://gameshub.dev/pageCounter"><button>Page Counter</button></a>
<a href="https://gameshub.dev/snakeAiBattle"><button>You v.s Snake AI</button></a>
<a href="https://gameshub.dev/snakeEcosystem"><button>Snake based Ecosystem</button></a>
<a href="https://gameshub.dev/existance"><button>Existance Simulator</button></a>
<br>
<a href="https://gameshub.dev/RaycastingTest"><button>Pseudo 3D World -- Raycasting Test</button></a>
<a href='https://gameshub.dev/appleCollection'><button>The Apple Collection</button></a>
<a href="http://gameshub.dev/pageCounter3D"><button>Page Counter 3D</button></a>
<a href="http://gameshub.dev/stolenCode/pokemonEmulators"><button>Pokemon Emulator</button></a>
<a href="http://gameshub.dev/cicada_rpg/index"><button>Cicada Collection</button></a>
<a href="http://gameshub.dev/pixelArtMaker"><button>Pixel Art Maker</button></a>
<a href="http://gameshub.dev/snake_ai-v2"><button>Snake AI 2</button></a>
<a href="http://gameshub.dev/conways_game_of_life"><button>Conway's Game Of Life</button></a>
<br>
<p>Multiplayer Games</p>
<a href='https://gameshub.dev/existanceSimulator'><button>Existance Simulator - Multiplayer</button></a>

<br>
<p>Holiday Games</p>
<a href='https://gameshub.dev/slayingSnowballs' disabled><button>Slaying Snowballs - Coming Soon!</button></a>

<br>
<p>Dev-Build // Testing Builds of games</p>
<a href='https://gameshub.dev/movement3dTest'><button>THREE js movement build</button></a>

<br>
<br>

<p>Links</p>
<a href='https://github.com/Academy-of-Code/GameHub'>Gameshub source code here</a>
<br>
<a disabled href='https://api.gameshub.dev'>API: api.gameshub.tk</a>

<script>
	function setCookie(cname, cvalue, exdays){
	  const d = new Date();
	  d.setTime(d.getTime() + (exdays*24*60*60*1000));
	  let expires = "expires="+d.toUTCString();
	  document.cookie = cname+"="+cvalue+";"+expires+";path=/";
	}
	function getCookie(cname){
	  let name = cname + "=";
	  let decodedCookie = decodeURIComponent(document.cookie);
	  let ca = decodedCookie.split(';');
	  for (let i=0; i<ca.length;i++){
		let c = ca[i];
	    while (c.charAt(0)==' '){
		c = c.substring(1);
	    }
	    if(c.indexOf(name)==0){
		return c.substring(name.length,c.length);
	    }
	  }
	  return "";
	}
	function modeEnable(){
		var monthList = ["January","February","March","April","May","June","July","August","September","October","November","December"];
		var d = new Date()
		var month = monthList[d.getMonth()]
		var theme = "dark"
		
		if(theme=="dark"){
			    var darkmodeColor = "#2C2F33"
			    paragraphs = document.getElementsByTagName("p")
			header1s = document.getElementsByTagName("h1")
			links = document.getElementsByTagName("a")
			labels = document.getElementsByTagName("label")

			    //document.body.style.background = darkmodeColor
			    for(var x=0;x<paragraphs.length;x++){
			      para = paragraphs[x]
			      para.style.color = "#ffffff"
			      // para.classList.add("darkmode_text")
			    }
			for(var x=0;x<header1s.length;x++){
			      h1 = header1s[x]
			      h1.style.color = "#ffffff"
			      // para.classList.add("darkmode_text")
			    }
			for(var x=0;x<links.length;x++){
			      link = links[x]
			      link.style.color = "#ffffff"
			      // para.classList.add("darkmode_text")
			    }
			for(var x=0;x<labels.length;x++){
			      lab = labels[x]
			      lab.style.color = "#ffffff"
			      // para.classList.add("darkmode_text")
			    }
		}
		return "done"
	}
	//setInterval(()=>{modeEnabled()},10)
	modeEnabled()
	alert(modeEnabled())
</script>

<script>
	let HOST = 'wss://multi-socket-ms.herokuapp.com/'
      let ws = new WebSocket(HOST);

      function heartbeat(){
        clearTimeout(this.pingTimeout);

        this.pingTimeout = setTimeout(() => {
              this.terminate()
            }, 30000);
      }

      ws.onmessage = function incoming(data) {
        var msg = data.data.text();
        msg.then(m=>{
          if(recentActions.length>0){
          	if (recentActions[0]=="tokenInfoGet"){
            		if (m!=="COULDNT_FIND_TOKEN" && m!== "ERROR_WHILST_GETTING_DATA"){
				console.log(m)
				document.getElementById("currentAcc").href = "https://gameshub.dev/gamehubapi/viewacc?username=" + JSON.parse(m).Username
				document.getElementById("currentAcc").innerHTML = "Currently signed in as " + JSON.parse(m).Username
				document.getElementById("tr1").style.display = "none"
				document.getElementById("tr2").style.display = "none"
              		} else{
				document.getElementById("currentAcc").href = "https://gameshub.dev/gamehubapi/signup"
				document.getElementById("currentAcc").innerHTML = "You are currently not signed in"
			}
            }
          }
          //console.log(m)
        })
      }

      ws.on('open', heartbeat);
      ws.on('ping', heartbeat);
      ws.on('close', function close() {
        clearTimeout(this.pingTimeout);
      })
</script>

<script>
var recentActions = []

// Websocket
window.onopen = sendReason()

function sendReason() {
	var time = setInterval(() => {
		try {
			ws.send('REASON-Gameshub_Api')
			ws.send('username-undefined')

			upa()
			clearInterval(time)
		} catch (err) {}
	}, 50)
}

function upa(){
	try {
		sendMsg('gameshub-api.herokuapp.com;/tokeninfo?token='+getCookie("accToken")+';GET');
		console.log("gameshub-api.herokuapp.com;/tokeninfo?token="+getCookie("accToken"))
		recentActions.push("tokenInfoGet")
	} catch (err) {}
}

function sendMsg(msg) {
	ws.send(msg)
}
</script>
